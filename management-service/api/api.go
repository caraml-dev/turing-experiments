// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/deepmap/oapi-codegen version v1.8.1 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"context"
	"encoding/base64"
	"fmt"
	"net/http"
	"net/url"
	"path"
	"strings"
	"time"

	"github.com/deepmap/oapi-codegen/pkg/runtime"
	"github.com/getkin/kin-openapi/openapi3"
	"github.com/go-chi/chi/v5"
	externalRef0 "github.com/gojek/turing-experiments/common/api/schema"
)

const (
	BearerAuthScopes = "bearerAuth.Scopes"
)

// BadRequest defines model for BadRequest.
type BadRequest externalRef0.Error

// CreateExperimentSuccess defines model for CreateExperimentSuccess.
type CreateExperimentSuccess struct {
	Data externalRef0.Experiment `json:"data"`
}

// CreateProjectSettingsSuccess defines model for CreateProjectSettingsSuccess.
type CreateProjectSettingsSuccess struct {
	Data externalRef0.ProjectSettings `json:"data"`
}

// CreateSegmentSuccess defines model for CreateSegmentSuccess.
type CreateSegmentSuccess struct {
	Data externalRef0.Segment `json:"data"`
}

// CreateTreatmentSuccess defines model for CreateTreatmentSuccess.
type CreateTreatmentSuccess struct {
	Data externalRef0.Treatment `json:"data"`
}

// DeleteSegmentSuccess defines model for DeleteSegmentSuccess.
type DeleteSegmentSuccess struct {
	Id *int `json:"id,omitempty"`
}

// DeleteTreatmentSuccess defines model for DeleteTreatmentSuccess.
type DeleteTreatmentSuccess struct {
	Id *int `json:"id,omitempty"`
}

// GetExperimentHistorySuccess defines model for GetExperimentHistorySuccess.
type GetExperimentHistorySuccess struct {
	Data externalRef0.ExperimentHistory `json:"data"`
}

// GetExperimentSuccess defines model for GetExperimentSuccess.
type GetExperimentSuccess struct {
	Data externalRef0.Experiment `json:"data"`
}

// GetProjectExperimentVariablesSuccess defines model for GetProjectExperimentVariablesSuccess.
type GetProjectExperimentVariablesSuccess struct {
	Data []string `json:"data"`
}

// GetProjectSettingsSuccess defines model for GetProjectSettingsSuccess.
type GetProjectSettingsSuccess struct {
	Data externalRef0.ProjectSettings `json:"data"`
}

// GetSegmentHistorySuccess defines model for GetSegmentHistorySuccess.
type GetSegmentHistorySuccess struct {
	Data externalRef0.SegmentHistory `json:"data"`
}

// GetSegmentSuccess defines model for GetSegmentSuccess.
type GetSegmentSuccess struct {
	Data externalRef0.Segment `json:"data"`
}

// GetSegmentersSuccess defines model for GetSegmentersSuccess.
type GetSegmentersSuccess struct {
	Data []externalRef0.Segmenter `json:"data"`
}

// GetTreatmentHistorySuccess defines model for GetTreatmentHistorySuccess.
type GetTreatmentHistorySuccess struct {
	Data externalRef0.TreatmentHistory `json:"data"`
}

// GetTreatmentSuccess defines model for GetTreatmentSuccess.
type GetTreatmentSuccess struct {
	Data externalRef0.Treatment `json:"data"`
}

// InternalServerError defines model for InternalServerError.
type InternalServerError externalRef0.Error

// ListExperimentHistorySuccess defines model for ListExperimentHistorySuccess.
type ListExperimentHistorySuccess struct {
	Data   []externalRef0.ExperimentHistory `json:"data"`
	Paging *externalRef0.Paging             `json:"paging,omitempty"`
}

// ListExperimentsSuccess defines model for ListExperimentsSuccess.
type ListExperimentsSuccess struct {
	Data   []externalRef0.Experiment `json:"data"`
	Paging *externalRef0.Paging      `json:"paging,omitempty"`
}

// ListProjectsSuccess defines model for ListProjectsSuccess.
type ListProjectsSuccess struct {
	Data []externalRef0.Project `json:"data"`
}

// ListSegmentHistorySuccess defines model for ListSegmentHistorySuccess.
type ListSegmentHistorySuccess struct {
	Data   []externalRef0.SegmentHistory `json:"data"`
	Paging *externalRef0.Paging          `json:"paging,omitempty"`
}

// ListSegmentersSuccess defines model for ListSegmentersSuccess.
type ListSegmentersSuccess struct {
	Data []externalRef0.Segmenter `json:"data"`
}

// ListSegmentsSuccess defines model for ListSegmentsSuccess.
type ListSegmentsSuccess struct {
	Data   []externalRef0.Segment `json:"data"`
	Paging *externalRef0.Paging   `json:"paging,omitempty"`
}

// ListTreatmentHistorySuccess defines model for ListTreatmentHistorySuccess.
type ListTreatmentHistorySuccess struct {
	Data   []externalRef0.TreatmentHistory `json:"data"`
	Paging *externalRef0.Paging            `json:"paging,omitempty"`
}

// ListTreatmentsSuccess defines model for ListTreatmentsSuccess.
type ListTreatmentsSuccess struct {
	Data   []externalRef0.Treatment `json:"data"`
	Paging *externalRef0.Paging     `json:"paging,omitempty"`
}

// NotFound defines model for NotFound.
type NotFound externalRef0.Error

// UpdateExperimentSuccess defines model for UpdateExperimentSuccess.
type UpdateExperimentSuccess struct {
	Data externalRef0.Experiment `json:"data"`
}

// UpdateProjectSettingsSuccess defines model for UpdateProjectSettingsSuccess.
type UpdateProjectSettingsSuccess struct {
	Data externalRef0.ProjectSettings `json:"data"`
}

// UpdateSegmentSuccess defines model for UpdateSegmentSuccess.
type UpdateSegmentSuccess struct {
	Data externalRef0.Segment `json:"data"`
}

// UpdateTreatmentSuccess defines model for UpdateTreatmentSuccess.
type UpdateTreatmentSuccess struct {
	Data externalRef0.Treatment `json:"data"`
}

// CreateExperimentRequestBody defines model for CreateExperimentRequestBody.
type CreateExperimentRequestBody struct {
	Description *string                            `json:"description"`
	EndTime     time.Time                          `json:"end_time"`
	Interval    *int32                             `json:"interval"`
	Name        string                             `json:"name"`
	Segment     externalRef0.ExperimentSegment     `json:"segment"`
	StartTime   time.Time                          `json:"start_time"`
	Status      externalRef0.ExperimentStatus      `json:"status"`
	Tier        *externalRef0.ExperimentTier       `json:"tier,omitempty"`
	Treatments  []externalRef0.ExperimentTreatment `json:"treatments"`
	Type        externalRef0.ExperimentType        `json:"type"`
	UpdatedBy   *string                            `json:"updated_by,omitempty"`
}

// CreateProjectSettingsRequestBody defines model for CreateProjectSettingsRequestBody.
type CreateProjectSettingsRequestBody struct {
	EnableS2idClustering *bool                          `json:"enable_s2id_clustering,omitempty"`
	RandomizationKey     string                         `json:"randomization_key"`
	Segmenters           externalRef0.ProjectSegmenters `json:"segmenters"`

	// Object containing information to define a valid treatment schema
	TreatmentSchema *externalRef0.TreatmentSchema `json:"treatment_schema,omitempty"`
	ValidationUrl   *string                       `json:"validation_url,omitempty"`
}

// CreateSegmentRequestBody defines model for CreateSegmentRequestBody.
type CreateSegmentRequestBody struct {
	Name      string                         `json:"name"`
	Segment   externalRef0.ExperimentSegment `json:"segment"`
	UpdatedBy *string                        `json:"updated_by,omitempty"`
}

// CreateTreatmentRequestBody defines model for CreateTreatmentRequestBody.
type CreateTreatmentRequestBody struct {
	Configuration map[string]interface{} `json:"configuration"`
	Name          string                 `json:"name"`
	UpdatedBy     *string                `json:"updated_by,omitempty"`
}

// UpdateExperimentRequestBody defines model for UpdateExperimentRequestBody.
type UpdateExperimentRequestBody struct {
	Description *string                            `json:"description"`
	EndTime     time.Time                          `json:"end_time"`
	Interval    *int32                             `json:"interval"`
	Segment     externalRef0.ExperimentSegment     `json:"segment"`
	StartTime   time.Time                          `json:"start_time"`
	Status      externalRef0.ExperimentStatus      `json:"status"`
	Tier        *externalRef0.ExperimentTier       `json:"tier,omitempty"`
	Treatments  []externalRef0.ExperimentTreatment `json:"treatments"`
	Type        externalRef0.ExperimentType        `json:"type"`
	UpdatedBy   *string                            `json:"updated_by,omitempty"`
}

// UpdateProjectSettingsRequestBody defines model for UpdateProjectSettingsRequestBody.
type UpdateProjectSettingsRequestBody struct {
	EnableS2idClustering *bool                          `json:"enable_s2id_clustering,omitempty"`
	RandomizationKey     string                         `json:"randomization_key"`
	Segmenters           externalRef0.ProjectSegmenters `json:"segmenters"`

	// Object containing information to define a valid treatment schema
	TreatmentSchema *externalRef0.TreatmentSchema `json:"treatment_schema,omitempty"`
	ValidationUrl   *string                       `json:"validation_url,omitempty"`
}

// UpdateSegmentRequestBody defines model for UpdateSegmentRequestBody.
type UpdateSegmentRequestBody struct {
	Segment   externalRef0.ExperimentSegment `json:"segment"`
	UpdatedBy *string                        `json:"updated_by,omitempty"`
}

// UpdateTreatmentRequestBody defines model for UpdateTreatmentRequestBody.
type UpdateTreatmentRequestBody struct {
	Configuration map[string]interface{} `json:"configuration"`
	UpdatedBy     *string                `json:"updated_by,omitempty"`
}

// ValidateEntityRequestBody defines model for ValidateEntityRequestBody.
type ValidateEntityRequestBody struct {
	Data map[string]interface{} `json:"data"`

	// Object containing information to define a valid treatment schema
	TreatmentSchema *externalRef0.TreatmentSchema `json:"treatment_schema,omitempty"`
	ValidationUrl   *string                       `json:"validation_url,omitempty"`
}

// ListExperimentsParams defines parameters for ListExperiments.
type ListExperimentsParams struct {
	Status *externalRef0.ExperimentStatus `json:"status,omitempty"`

	// Used together with the start_time, to filter experiments that are at least partially running in the input range.
	EndTime   *time.Time                   `json:"end_time,omitempty"`
	Tier      *externalRef0.ExperimentTier `json:"tier,omitempty"`
	Type      *externalRef0.ExperimentType `json:"type,omitempty"`
	Name      *string                      `json:"name,omitempty"`
	UpdatedBy *string                      `json:"updated_by,omitempty"`

	// Search experiment name and description for a partial match of the search text
	Search *string `json:"search,omitempty"`

	// Result page number. It defaults to 1.
	Page *int32 `json:"page,omitempty"`

	// Number of items on each page. It defaults to 10.
	PageSize *int32 `json:"page_size,omitempty"`

	// Used together with the end_time, to filter experiments that are at least partially running in the input range.
	StartTime *time.Time              `json:"start_time,omitempty"`
	Segment   *map[string]interface{} `json:"segment,omitempty"`

	// controls whether or not weak segmenter matches (experiments where the segmenter is optional) should be returned
	IncludeWeakMatch *bool `json:"include_weak_match,omitempty"`
}

// ListExperimentHistoryParams defines parameters for ListExperimentHistory.
type ListExperimentHistoryParams struct {

	// Result page number. It defaults to 1.
	Page *int32 `json:"page,omitempty"`

	// Number of items on each page. It defaults to 10.
	PageSize *int32 `json:"page_size,omitempty"`
}

// ListSegmentsParams defines parameters for ListSegments.
type ListSegmentsParams struct {
	UpdatedBy *string `json:"updated_by,omitempty"`

	// Search segment name for a partial match of the search text
	Search *string `json:"search,omitempty"`

	// Result page number. If empty and neither `fields` nor `page` is set, it defaults to 1.
	Page *int32 `json:"page,omitempty"`

	// Number of items on each page. If empty and neither `fields` nor `page_size` is set, it defaults to 10.
	PageSize *int32 `json:"page_size,omitempty"`

	// A selector to restrict the list of returned objects by their fields. If unset, all the fields will be returned.
	// Paginated responses will be returned if both or either of `page` and `page_size` parameters are provided.
	Fields *[]externalRef0.SegmentField `json:"fields,omitempty"`
}

// ListSegmentHistoryParams defines parameters for ListSegmentHistory.
type ListSegmentHistoryParams struct {

	// Result page number. It defaults to 1.
	Page *int32 `json:"page,omitempty"`

	// Number of items on each page. It defaults to 10.
	PageSize *int32 `json:"page_size,omitempty"`
}

// ListTreatmentsParams defines parameters for ListTreatments.
type ListTreatmentsParams struct {
	UpdatedBy *string `json:"updated_by,omitempty"`

	// Search treatment name for a partial match of the search text
	Search *string `json:"search,omitempty"`

	// Result page number. If empty and neither `fields` nor `page` is set, it defaults to 1.
	Page *int32 `json:"page,omitempty"`

	// Number of items on each page. If empty and neither `fields` nor `page_size` is set, it defaults to 10.
	PageSize *int32 `json:"page_size,omitempty"`

	// A selector to restrict the list of returned objects by their fields. If unset, all the fields will be returned.
	// Paginated responses will be returned if both or either of `page` and `page_size` parameters are provided.
	Fields *[]externalRef0.TreatmentField `json:"fields,omitempty"`
}

// ListTreatmentHistoryParams defines parameters for ListTreatmentHistory.
type ListTreatmentHistoryParams struct {

	// Result page number. If empty, it defaults to 1.
	Page *int32 `json:"page,omitempty"`

	// Number of items on each page. If empty, it defaults to 10.
	PageSize *int32 `json:"page_size,omitempty"`
}

// CreateExperimentJSONRequestBody defines body for CreateExperiment for application/json ContentType.
type CreateExperimentJSONRequestBody CreateExperimentRequestBody

// UpdateExperimentJSONRequestBody defines body for UpdateExperiment for application/json ContentType.
type UpdateExperimentJSONRequestBody UpdateExperimentRequestBody

// CreateSegmentJSONRequestBody defines body for CreateSegment for application/json ContentType.
type CreateSegmentJSONRequestBody CreateSegmentRequestBody

// UpdateSegmentJSONRequestBody defines body for UpdateSegment for application/json ContentType.
type UpdateSegmentJSONRequestBody UpdateSegmentRequestBody

// CreateProjectSettingsJSONRequestBody defines body for CreateProjectSettings for application/json ContentType.
type CreateProjectSettingsJSONRequestBody CreateProjectSettingsRequestBody

// UpdateProjectSettingsJSONRequestBody defines body for UpdateProjectSettings for application/json ContentType.
type UpdateProjectSettingsJSONRequestBody UpdateProjectSettingsRequestBody

// CreateTreatmentJSONRequestBody defines body for CreateTreatment for application/json ContentType.
type CreateTreatmentJSONRequestBody CreateTreatmentRequestBody

// UpdateTreatmentJSONRequestBody defines body for UpdateTreatment for application/json ContentType.
type UpdateTreatmentJSONRequestBody UpdateTreatmentRequestBody

// ValidateEntityJSONRequestBody defines body for ValidateEntity for application/json ContentType.
type ValidateEntityJSONRequestBody ValidateEntityRequestBody

// ServerInterface represents all server handlers.
type ServerInterface interface {
	// List info of all projects set up for Experimentation
	// (GET /projects)
	ListProjects(w http.ResponseWriter, r *http.Request)
	// Get all parameters required for generating treatments for the given project
	// (GET /projects/{project_id}/experiment-variables)
	GetProjectExperimentVariables(w http.ResponseWriter, r *http.Request, projectId int64)
	// Get experiments for a project w.r.t. query params
	// (GET /projects/{project_id}/experiments)
	ListExperiments(w http.ResponseWriter, r *http.Request, projectId int64, params ListExperimentsParams)
	// Create a new experiment for a project
	// (POST /projects/{project_id}/experiments)
	CreateExperiment(w http.ResponseWriter, r *http.Request, projectId int64)
	// Get details of an experiment with the given experiment_id and project_id
	// (GET /projects/{project_id}/experiments/{experiment_id})
	GetExperiment(w http.ResponseWriter, r *http.Request, projectId int64, experimentId int64)
	// Update an experiment with the given experiment_id and project_id
	// (PUT /projects/{project_id}/experiments/{experiment_id})
	UpdateExperiment(w http.ResponseWriter, r *http.Request, projectId int64, experimentId int64)
	// Disable an experiment with the given experiment_id and project_id
	// (PUT /projects/{project_id}/experiments/{experiment_id}/disable)
	DisableExperiment(w http.ResponseWriter, r *http.Request, projectId int64, experimentId int64)
	// Enable an experiment with the given experiment_id and project_id
	// (PUT /projects/{project_id}/experiments/{experiment_id}/enable)
	EnableExperiment(w http.ResponseWriter, r *http.Request, projectId int64, experimentId int64)
	// List an experiment's historical versions
	// (GET /projects/{project_id}/experiments/{experiment_id}/history)
	ListExperimentHistory(w http.ResponseWriter, r *http.Request, projectId int64, experimentId int64, params ListExperimentHistoryParams)
	// List an experiment's historical versions
	// (GET /projects/{project_id}/experiments/{experiment_id}/history/{version})
	GetExperimentHistory(w http.ResponseWriter, r *http.Request, projectId int64, experimentId int64, version int64)
	// Get all segmenter configurations required for generating experiments for the given project
	// (GET /projects/{project_id}/segmenters)
	GetSegmenters(w http.ResponseWriter, r *http.Request, projectId int64)
	// Get segments for a project w.r.t query params
	// (GET /projects/{project_id}/segments)
	ListSegments(w http.ResponseWriter, r *http.Request, projectId int64, params ListSegmentsParams)
	// Create a new segment for a project
	// (POST /projects/{project_id}/segments)
	CreateSegment(w http.ResponseWriter, r *http.Request, projectId int64)
	// Delete a segment with the given segment_id and project_id
	// (DELETE /projects/{project_id}/segments/{segment_id})
	DeleteSegment(w http.ResponseWriter, r *http.Request, projectId int64, segmentId int64)
	// Get details of a segment with the given segment_id and project_id
	// (GET /projects/{project_id}/segments/{segment_id})
	GetSegment(w http.ResponseWriter, r *http.Request, projectId int64, segmentId int64)
	// Update a segment with the given segment_id and project_id
	// (PUT /projects/{project_id}/segments/{segment_id})
	UpdateSegment(w http.ResponseWriter, r *http.Request, projectId int64, segmentId int64)
	// List a segment's historical versions
	// (GET /projects/{project_id}/segments/{segment_id}/history)
	ListSegmentHistory(w http.ResponseWriter, r *http.Request, projectId int64, segmentId int64, params ListSegmentHistoryParams)
	// Get a segment's historical version
	// (GET /projects/{project_id}/segments/{segment_id}/history/{version})
	GetSegmentHistory(w http.ResponseWriter, r *http.Request, projectId int64, segmentId int64, version int64)
	// Get the settings for the given project
	// (GET /projects/{project_id}/settings)
	GetProjectSettings(w http.ResponseWriter, r *http.Request, projectId int64)
	// Set up new project for Experimentation
	// (POST /projects/{project_id}/settings)
	CreateProjectSettings(w http.ResponseWriter, r *http.Request, projectId int64)
	// Update the settings for the given project
	// (PUT /projects/{project_id}/settings)
	UpdateProjectSettings(w http.ResponseWriter, r *http.Request, projectId int64)
	// Get treatments for a project w.r.t query params
	// (GET /projects/{project_id}/treatments)
	ListTreatments(w http.ResponseWriter, r *http.Request, projectId int64, params ListTreatmentsParams)
	// Create a new treatment for a project
	// (POST /projects/{project_id}/treatments)
	CreateTreatment(w http.ResponseWriter, r *http.Request, projectId int64)
	// Delete a treatment with the given treatment_id and project_id
	// (DELETE /projects/{project_id}/treatments/{treatment_id})
	DeleteTreatment(w http.ResponseWriter, r *http.Request, projectId int64, treatmentId int64)
	// Get details of a treatment with the given treatment_id and project_id
	// (GET /projects/{project_id}/treatments/{treatment_id})
	GetTreatment(w http.ResponseWriter, r *http.Request, projectId int64, treatmentId int64)
	// Update a treatment with the given treatment_id and project_id
	// (PUT /projects/{project_id}/treatments/{treatment_id})
	UpdateTreatment(w http.ResponseWriter, r *http.Request, projectId int64, treatmentId int64)
	// List a treatment's historical versions
	// (GET /projects/{project_id}/treatments/{treatment_id}/history)
	ListTreatmentHistory(w http.ResponseWriter, r *http.Request, projectId int64, treatmentId int64, params ListTreatmentHistoryParams)
	// List a treatment's historical versions
	// (GET /projects/{project_id}/treatments/{treatment_id}/history/{version})
	GetTreatmentHistory(w http.ResponseWriter, r *http.Request, projectId int64, treatmentId int64, version int64)
	// List all segmenter configurations registered with XP
	// (GET /segmenters)
	ListSegmenters(w http.ResponseWriter, r *http.Request)
	// validates an entity against a given treatment schema or validation url
	// (POST /validate)
	ValidateEntity(w http.ResponseWriter, r *http.Request)
}

// Copied from https://github.com/deepmap/oapi-codegen/blob/v1.8.1/pkg/codegen/templates/chi-middleware.tmpl
// Motivation behind customizing the template is for capturing segmenter values via query parameters for
// ListExperiments (GET method)

// ServerInterfaceWrapper converts contexts to parameters.
type ServerInterfaceWrapper struct {
	Handler            ServerInterface
	HandlerMiddlewares []MiddlewareFunc
}

type MiddlewareFunc func(http.HandlerFunc) http.HandlerFunc

// ListProjects operation middleware
func (siw *ServerInterfaceWrapper) ListProjects(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ListProjects(w, r)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// GetProjectExperimentVariables operation middleware
func (siw *ServerInterfaceWrapper) GetProjectExperimentVariables(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetProjectExperimentVariables(w, r, projectId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// ListExperiments operation middleware
func (siw *ServerInterfaceWrapper) ListExperiments(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	// Parameter object where we will unmarshal all parameters from the context
	var params ListExperimentsParams
	paramsSet := map[string]bool{}

	// ------------- Optional query parameter "status" -------------
	if paramValue := r.URL.Query().Get("status"); paramValue != "" {
		paramsSet["status"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "status", r.URL.Query(), &params.Status)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter status: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "end_time" -------------
	if paramValue := r.URL.Query().Get("end_time"); paramValue != "" {
		paramsSet["end_time"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "end_time", r.URL.Query(), &params.EndTime)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter end_time: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "tier" -------------
	if paramValue := r.URL.Query().Get("tier"); paramValue != "" {
		paramsSet["tier"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "tier", r.URL.Query(), &params.Tier)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter tier: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "type" -------------
	if paramValue := r.URL.Query().Get("type"); paramValue != "" {
		paramsSet["type"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "type", r.URL.Query(), &params.Type)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter type: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "name" -------------
	if paramValue := r.URL.Query().Get("name"); paramValue != "" {
		paramsSet["name"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "name", r.URL.Query(), &params.Name)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter name: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "updated_by" -------------
	if paramValue := r.URL.Query().Get("updated_by"); paramValue != "" {
		paramsSet["updated_by"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "updated_by", r.URL.Query(), &params.UpdatedBy)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter updated_by: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "search" -------------
	if paramValue := r.URL.Query().Get("search"); paramValue != "" {
		paramsSet["search"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "search", r.URL.Query(), &params.Search)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter search: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "page" -------------
	if paramValue := r.URL.Query().Get("page"); paramValue != "" {
		paramsSet["page"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page", r.URL.Query(), &params.Page)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "page_size" -------------
	if paramValue := r.URL.Query().Get("page_size"); paramValue != "" {
		paramsSet["page_size"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page_size", r.URL.Query(), &params.PageSize)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page_size: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "start_time" -------------
	if paramValue := r.URL.Query().Get("start_time"); paramValue != "" {
		paramsSet["start_time"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "start_time", r.URL.Query(), &params.StartTime)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter start_time: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "segment" -------------
	if paramValue := r.URL.Query().Get("segment"); paramValue != "" {
		paramsSet["segment"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "segment", r.URL.Query(), &params.Segment)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter segment: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "include_weak_match" -------------
	if paramValue := r.URL.Query().Get("include_weak_match"); paramValue != "" {
		paramsSet["include_weak_match"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "include_weak_match", r.URL.Query(), &params.IncludeWeakMatch)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter include_weak_match: %s", err), http.StatusBadRequest)
		return
	}

	allSegmenters := map[string]interface{}{}
	for k, v := range r.URL.Query() {
		if _, contains := paramsSet[k]; !contains {
			allSegmenters[k] = v
		}
	}
	params.Segment = &allSegmenters

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ListExperiments(w, r, projectId, params)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// CreateExperiment operation middleware
func (siw *ServerInterfaceWrapper) CreateExperiment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.CreateExperiment(w, r, projectId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// GetExperiment operation middleware
func (siw *ServerInterfaceWrapper) GetExperiment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "experiment_id" -------------
	var experimentId int64

	err = runtime.BindStyledParameter("simple", false, "experiment_id", chi.URLParam(r, "experiment_id"), &experimentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter experiment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetExperiment(w, r, projectId, experimentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// UpdateExperiment operation middleware
func (siw *ServerInterfaceWrapper) UpdateExperiment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "experiment_id" -------------
	var experimentId int64

	err = runtime.BindStyledParameter("simple", false, "experiment_id", chi.URLParam(r, "experiment_id"), &experimentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter experiment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.UpdateExperiment(w, r, projectId, experimentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// DisableExperiment operation middleware
func (siw *ServerInterfaceWrapper) DisableExperiment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "experiment_id" -------------
	var experimentId int64

	err = runtime.BindStyledParameter("simple", false, "experiment_id", chi.URLParam(r, "experiment_id"), &experimentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter experiment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.DisableExperiment(w, r, projectId, experimentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// EnableExperiment operation middleware
func (siw *ServerInterfaceWrapper) EnableExperiment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "experiment_id" -------------
	var experimentId int64

	err = runtime.BindStyledParameter("simple", false, "experiment_id", chi.URLParam(r, "experiment_id"), &experimentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter experiment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.EnableExperiment(w, r, projectId, experimentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// ListExperimentHistory operation middleware
func (siw *ServerInterfaceWrapper) ListExperimentHistory(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "experiment_id" -------------
	var experimentId int64

	err = runtime.BindStyledParameter("simple", false, "experiment_id", chi.URLParam(r, "experiment_id"), &experimentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter experiment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	// Parameter object where we will unmarshal all parameters from the context
	var params ListExperimentHistoryParams
	paramsSet := map[string]bool{}

	// ------------- Optional query parameter "page" -------------
	if paramValue := r.URL.Query().Get("page"); paramValue != "" {
		paramsSet["page"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page", r.URL.Query(), &params.Page)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "page_size" -------------
	if paramValue := r.URL.Query().Get("page_size"); paramValue != "" {
		paramsSet["page_size"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page_size", r.URL.Query(), &params.PageSize)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page_size: %s", err), http.StatusBadRequest)
		return
	}

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ListExperimentHistory(w, r, projectId, experimentId, params)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// GetExperimentHistory operation middleware
func (siw *ServerInterfaceWrapper) GetExperimentHistory(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "experiment_id" -------------
	var experimentId int64

	err = runtime.BindStyledParameter("simple", false, "experiment_id", chi.URLParam(r, "experiment_id"), &experimentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter experiment_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "version" -------------
	var version int64

	err = runtime.BindStyledParameter("simple", false, "version", chi.URLParam(r, "version"), &version)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter version: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetExperimentHistory(w, r, projectId, experimentId, version)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// GetSegmenters operation middleware
func (siw *ServerInterfaceWrapper) GetSegmenters(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetSegmenters(w, r, projectId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// ListSegments operation middleware
func (siw *ServerInterfaceWrapper) ListSegments(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	// Parameter object where we will unmarshal all parameters from the context
	var params ListSegmentsParams
	paramsSet := map[string]bool{}

	// ------------- Optional query parameter "updated_by" -------------
	if paramValue := r.URL.Query().Get("updated_by"); paramValue != "" {
		paramsSet["updated_by"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "updated_by", r.URL.Query(), &params.UpdatedBy)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter updated_by: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "search" -------------
	if paramValue := r.URL.Query().Get("search"); paramValue != "" {
		paramsSet["search"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "search", r.URL.Query(), &params.Search)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter search: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "page" -------------
	if paramValue := r.URL.Query().Get("page"); paramValue != "" {
		paramsSet["page"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page", r.URL.Query(), &params.Page)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "page_size" -------------
	if paramValue := r.URL.Query().Get("page_size"); paramValue != "" {
		paramsSet["page_size"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page_size", r.URL.Query(), &params.PageSize)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page_size: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "fields" -------------
	if paramValue := r.URL.Query().Get("fields"); paramValue != "" {
		paramsSet["fields"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "fields", r.URL.Query(), &params.Fields)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter fields: %s", err), http.StatusBadRequest)
		return
	}

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ListSegments(w, r, projectId, params)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// CreateSegment operation middleware
func (siw *ServerInterfaceWrapper) CreateSegment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.CreateSegment(w, r, projectId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// DeleteSegment operation middleware
func (siw *ServerInterfaceWrapper) DeleteSegment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "segment_id" -------------
	var segmentId int64

	err = runtime.BindStyledParameter("simple", false, "segment_id", chi.URLParam(r, "segment_id"), &segmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter segment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.DeleteSegment(w, r, projectId, segmentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// GetSegment operation middleware
func (siw *ServerInterfaceWrapper) GetSegment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "segment_id" -------------
	var segmentId int64

	err = runtime.BindStyledParameter("simple", false, "segment_id", chi.URLParam(r, "segment_id"), &segmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter segment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetSegment(w, r, projectId, segmentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// UpdateSegment operation middleware
func (siw *ServerInterfaceWrapper) UpdateSegment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "segment_id" -------------
	var segmentId int64

	err = runtime.BindStyledParameter("simple", false, "segment_id", chi.URLParam(r, "segment_id"), &segmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter segment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.UpdateSegment(w, r, projectId, segmentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// ListSegmentHistory operation middleware
func (siw *ServerInterfaceWrapper) ListSegmentHistory(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "segment_id" -------------
	var segmentId int64

	err = runtime.BindStyledParameter("simple", false, "segment_id", chi.URLParam(r, "segment_id"), &segmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter segment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	// Parameter object where we will unmarshal all parameters from the context
	var params ListSegmentHistoryParams
	paramsSet := map[string]bool{}

	// ------------- Optional query parameter "page" -------------
	if paramValue := r.URL.Query().Get("page"); paramValue != "" {
		paramsSet["page"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page", r.URL.Query(), &params.Page)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "page_size" -------------
	if paramValue := r.URL.Query().Get("page_size"); paramValue != "" {
		paramsSet["page_size"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page_size", r.URL.Query(), &params.PageSize)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page_size: %s", err), http.StatusBadRequest)
		return
	}

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ListSegmentHistory(w, r, projectId, segmentId, params)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// GetSegmentHistory operation middleware
func (siw *ServerInterfaceWrapper) GetSegmentHistory(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "segment_id" -------------
	var segmentId int64

	err = runtime.BindStyledParameter("simple", false, "segment_id", chi.URLParam(r, "segment_id"), &segmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter segment_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "version" -------------
	var version int64

	err = runtime.BindStyledParameter("simple", false, "version", chi.URLParam(r, "version"), &version)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter version: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetSegmentHistory(w, r, projectId, segmentId, version)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// GetProjectSettings operation middleware
func (siw *ServerInterfaceWrapper) GetProjectSettings(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetProjectSettings(w, r, projectId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// CreateProjectSettings operation middleware
func (siw *ServerInterfaceWrapper) CreateProjectSettings(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.CreateProjectSettings(w, r, projectId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// UpdateProjectSettings operation middleware
func (siw *ServerInterfaceWrapper) UpdateProjectSettings(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.UpdateProjectSettings(w, r, projectId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// ListTreatments operation middleware
func (siw *ServerInterfaceWrapper) ListTreatments(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	// Parameter object where we will unmarshal all parameters from the context
	var params ListTreatmentsParams
	paramsSet := map[string]bool{}

	// ------------- Optional query parameter "updated_by" -------------
	if paramValue := r.URL.Query().Get("updated_by"); paramValue != "" {
		paramsSet["updated_by"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "updated_by", r.URL.Query(), &params.UpdatedBy)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter updated_by: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "search" -------------
	if paramValue := r.URL.Query().Get("search"); paramValue != "" {
		paramsSet["search"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "search", r.URL.Query(), &params.Search)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter search: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "page" -------------
	if paramValue := r.URL.Query().Get("page"); paramValue != "" {
		paramsSet["page"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page", r.URL.Query(), &params.Page)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "page_size" -------------
	if paramValue := r.URL.Query().Get("page_size"); paramValue != "" {
		paramsSet["page_size"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page_size", r.URL.Query(), &params.PageSize)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page_size: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "fields" -------------
	if paramValue := r.URL.Query().Get("fields"); paramValue != "" {
		paramsSet["fields"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "fields", r.URL.Query(), &params.Fields)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter fields: %s", err), http.StatusBadRequest)
		return
	}

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ListTreatments(w, r, projectId, params)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// CreateTreatment operation middleware
func (siw *ServerInterfaceWrapper) CreateTreatment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.CreateTreatment(w, r, projectId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// DeleteTreatment operation middleware
func (siw *ServerInterfaceWrapper) DeleteTreatment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "treatment_id" -------------
	var treatmentId int64

	err = runtime.BindStyledParameter("simple", false, "treatment_id", chi.URLParam(r, "treatment_id"), &treatmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter treatment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.DeleteTreatment(w, r, projectId, treatmentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// GetTreatment operation middleware
func (siw *ServerInterfaceWrapper) GetTreatment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "treatment_id" -------------
	var treatmentId int64

	err = runtime.BindStyledParameter("simple", false, "treatment_id", chi.URLParam(r, "treatment_id"), &treatmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter treatment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetTreatment(w, r, projectId, treatmentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// UpdateTreatment operation middleware
func (siw *ServerInterfaceWrapper) UpdateTreatment(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "treatment_id" -------------
	var treatmentId int64

	err = runtime.BindStyledParameter("simple", false, "treatment_id", chi.URLParam(r, "treatment_id"), &treatmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter treatment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.UpdateTreatment(w, r, projectId, treatmentId)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// ListTreatmentHistory operation middleware
func (siw *ServerInterfaceWrapper) ListTreatmentHistory(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "treatment_id" -------------
	var treatmentId int64

	err = runtime.BindStyledParameter("simple", false, "treatment_id", chi.URLParam(r, "treatment_id"), &treatmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter treatment_id: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	// Parameter object where we will unmarshal all parameters from the context
	var params ListTreatmentHistoryParams
	paramsSet := map[string]bool{}

	// ------------- Optional query parameter "page" -------------
	if paramValue := r.URL.Query().Get("page"); paramValue != "" {
		paramsSet["page"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page", r.URL.Query(), &params.Page)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "page_size" -------------
	if paramValue := r.URL.Query().Get("page_size"); paramValue != "" {
		paramsSet["page_size"] = true

	}

	err = runtime.BindQueryParameter("form", true, false, "page_size", r.URL.Query(), &params.PageSize)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter page_size: %s", err), http.StatusBadRequest)
		return
	}

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ListTreatmentHistory(w, r, projectId, treatmentId, params)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// GetTreatmentHistory operation middleware
func (siw *ServerInterfaceWrapper) GetTreatmentHistory(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	var err error

	// ------------- Path parameter "project_id" -------------
	var projectId int64

	err = runtime.BindStyledParameter("simple", false, "project_id", chi.URLParam(r, "project_id"), &projectId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter project_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "treatment_id" -------------
	var treatmentId int64

	err = runtime.BindStyledParameter("simple", false, "treatment_id", chi.URLParam(r, "treatment_id"), &treatmentId)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter treatment_id: %s", err), http.StatusBadRequest)
		return
	}

	// ------------- Path parameter "version" -------------
	var version int64

	err = runtime.BindStyledParameter("simple", false, "version", chi.URLParam(r, "version"), &version)
	if err != nil {
		http.Error(w, fmt.Sprintf("Invalid format for parameter version: %s", err), http.StatusBadRequest)
		return
	}

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetTreatmentHistory(w, r, projectId, treatmentId, version)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// ListSegmenters operation middleware
func (siw *ServerInterfaceWrapper) ListSegmenters(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ListSegmenters(w, r)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// ValidateEntity operation middleware
func (siw *ServerInterfaceWrapper) ValidateEntity(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	ctx = context.WithValue(ctx, BearerAuthScopes, []string{""})

	var handler = func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ValidateEntity(w, r)
	}

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler(w, r.WithContext(ctx))
}

// Handler creates http.Handler with routing matching OpenAPI spec.
func Handler(si ServerInterface) http.Handler {
	return HandlerWithOptions(si, ChiServerOptions{})
}

type ChiServerOptions struct {
	BaseURL     string
	BaseRouter  chi.Router
	Middlewares []MiddlewareFunc
}

// HandlerFromMux creates http.Handler with routing matching OpenAPI spec based on the provided mux.
func HandlerFromMux(si ServerInterface, r chi.Router) http.Handler {
	return HandlerWithOptions(si, ChiServerOptions{
		BaseRouter: r,
	})
}

func HandlerFromMuxWithBaseURL(si ServerInterface, r chi.Router, baseURL string) http.Handler {
	return HandlerWithOptions(si, ChiServerOptions{
		BaseURL:    baseURL,
		BaseRouter: r,
	})
}

// HandlerWithOptions creates http.Handler with additional options
func HandlerWithOptions(si ServerInterface, options ChiServerOptions) http.Handler {
	r := options.BaseRouter

	if r == nil {
		r = chi.NewRouter()
	}
	wrapper := ServerInterfaceWrapper{
		Handler:            si,
		HandlerMiddlewares: options.Middlewares,
	}

	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects", wrapper.ListProjects)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/experiment-variables", wrapper.GetProjectExperimentVariables)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/experiments", wrapper.ListExperiments)
	})
	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/projects/{project_id}/experiments", wrapper.CreateExperiment)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/experiments/{experiment_id}", wrapper.GetExperiment)
	})
	r.Group(func(r chi.Router) {
		r.Put(options.BaseURL+"/projects/{project_id}/experiments/{experiment_id}", wrapper.UpdateExperiment)
	})
	r.Group(func(r chi.Router) {
		r.Put(options.BaseURL+"/projects/{project_id}/experiments/{experiment_id}/disable", wrapper.DisableExperiment)
	})
	r.Group(func(r chi.Router) {
		r.Put(options.BaseURL+"/projects/{project_id}/experiments/{experiment_id}/enable", wrapper.EnableExperiment)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/experiments/{experiment_id}/history", wrapper.ListExperimentHistory)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/experiments/{experiment_id}/history/{version}", wrapper.GetExperimentHistory)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/segmenters", wrapper.GetSegmenters)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/segments", wrapper.ListSegments)
	})
	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/projects/{project_id}/segments", wrapper.CreateSegment)
	})
	r.Group(func(r chi.Router) {
		r.Delete(options.BaseURL+"/projects/{project_id}/segments/{segment_id}", wrapper.DeleteSegment)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/segments/{segment_id}", wrapper.GetSegment)
	})
	r.Group(func(r chi.Router) {
		r.Put(options.BaseURL+"/projects/{project_id}/segments/{segment_id}", wrapper.UpdateSegment)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/segments/{segment_id}/history", wrapper.ListSegmentHistory)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/segments/{segment_id}/history/{version}", wrapper.GetSegmentHistory)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/settings", wrapper.GetProjectSettings)
	})
	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/projects/{project_id}/settings", wrapper.CreateProjectSettings)
	})
	r.Group(func(r chi.Router) {
		r.Put(options.BaseURL+"/projects/{project_id}/settings", wrapper.UpdateProjectSettings)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/treatments", wrapper.ListTreatments)
	})
	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/projects/{project_id}/treatments", wrapper.CreateTreatment)
	})
	r.Group(func(r chi.Router) {
		r.Delete(options.BaseURL+"/projects/{project_id}/treatments/{treatment_id}", wrapper.DeleteTreatment)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/treatments/{treatment_id}", wrapper.GetTreatment)
	})
	r.Group(func(r chi.Router) {
		r.Put(options.BaseURL+"/projects/{project_id}/treatments/{treatment_id}", wrapper.UpdateTreatment)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/treatments/{treatment_id}/history", wrapper.ListTreatmentHistory)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/projects/{project_id}/treatments/{treatment_id}/history/{version}", wrapper.GetTreatmentHistory)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/segmenters", wrapper.ListSegmenters)
	})
	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/validate", wrapper.ValidateEntity)
	})

	return r
}

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %s", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %s", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %s", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	var res = make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	pathPrefix := path.Dir(pathToFile)

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(pathPrefix, "schema.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	var resolvePath = PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		var pathToFile = url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
